<!DOCTYPE html>

<!--[if lte IE 9 ]> <html class="ie"> <![endif]-->
<!--[if (gt IE 9)|!(IE)]><!--> <html> <!--<![endif]-->

<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1">
<script src="js/jquery-1.8.3.min.js"></script>

<head>
<title>A.H.C.S Configuration</title>
</head>

<script type="text/javascript">
	var HTTPrequest = new XMLHttpRequest();
	function GetCurrentProfile()
	{
		var deviceID = "__SL_G_UID";
		document.getElementById("dev_id").innerHTML=deviceID;

		var currentSSID = "__SL_G_PN1";
		document.getElementById("cur_ssid").innerHTML=currentSSID;
		
		var currentSecurity = "__SL_G_PS1";
		document.getElementById("cur_sec").innerHTML=currentSecurity;
	}
	
	function Disconnect()
	{
		var params = "__SL_P_UDC=1";
		
		HTTPrequest.open("POST","profiles_add.html", true);
		HTTPrequest.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
		HTTPrequest.setRequestHeader("Content-length", params.length);
		HTTPrequest.setRequestHeader("Connection", "close");
		HTTPrequest.onreadystatechange = function()
		{
			if (HTTPrequest.readyState==4 && HTTPrequest.status==200){}
		}
		HTTPrequest.send(params);
	}

	function Apply()
	{
		var params = "__SL_P_UUP=";
		
		params += document.getElementsByName("__SL_P_P.A")[0].value;
		var ele = document.getElementsByName("__SL_P_P.B");
		for (var i = 0; i < ele.length; i++)
		{
			if (ele[i].checked)
			{
				params += "$SEC=" + ele[i].value;
			}
		}
		params += "$PASSKEY=" + document.getElementsByName("__SL_P_P.C")[0].value;

		HTTPrequest.open("POST","No-content", true);
		HTTPrequest.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
		HTTPrequest.setRequestHeader("Content-length", params.length);
		HTTPrequest.setRequestHeader("Connection", "close");
		HTTPrequest.onreadystatechange = function()
		{
			if (HTTPrequest.readyState==4 && HTTPrequest.status==200){}
		}
		HTTPrequest.send(params);
	}

	$('form').on('submit', function(event){
        event.preventDefault();
        // do the post to 'action' defined by form html
        // serialize the form data for submission
        $.post($form.attr('action'), $form.serialize())
            // define callback function for when the submission completes
            .done(function(data, textStatus, jqXHR) {
                // textStatus returns 'success' if http status 200 or similar
                if (textStatus == 'success') {
                    statusMessage.html('Changes applied.').delay( 3000 ).fadeOut( 400 );
                    if (bClearForm) {
                        $form.each(function(){
                            this.reset();                            
                        });
                    }
                    location.reload();
                } else {
                    statusMessage.html('Failed to apply changes.').delay( 3000 ).fadeOut( 400 );
                }
            })
            // define callback function for if the form fails
            .fail(function(jqxhr, settings, exception) {
                statusMessage.html('Failed to apply changes.').delay( 3000 ).fadeOut( 400 );
            });
    });


</script>

<body class="in-frame" onload="GetCurrentProfile()"  style=
   "background-color: #232741; 
    font-family:Arial, sans-serif;
	float: left;
	display: block;
	color: white;
	text-decoration: none;
	text-shadow: -4px 3px 3.5px #666666;
	font-size: large;
	font-weight: bold;"
>

	<div style="background-color: #080404; position: relative; bottom: 10px; right: 10px; padding: 10px 100%; width: 100%;" >
		<h1 style="font-size: x-large; position: relative; left: -450px">A.H.C.S. WIFI Configuration</h1>
	</div>

	<form method="POST" name="SimpleLink Configuration" action="profiles_add.html">
		<input type="hidden" name="__SL_P_S.R" value="Index.html">
		<input type="hidden" name="__SL_P_PRR" value="1">
		<table border="0"  width="540px" cellpadding="3" cellspacing="0" style="align-items: left; text-align: left; padding: 13px 16px;" >
			<tr>
				<td class="frame-title"  align=left colspan=1 > 
					Device ID:  </td>
				<td  class="label" dir=LTR align=left><span id="dev_id"></span></td>
			</tr>

			<tr>
				<td class="frame-title"  align=left colspan=1 > 
					Current SSID:  </td>
				<td  class="label" dir=LTR align=left><span id="cur_ssid"></span></td>
			</tr>

			<tr>
				<td class="frame-title" align=left colspan=1 > 
					Security:  </td>
				<td  class="label" dir=LTR align=left><span id="cur_sec"></span></td>
			</tr>

	
			<tr>
				<td  class="label" dir=LTR align=center colspan=1 style="padding-bottom: 15px;padding-top: 30px;"><span id="ssid_label"> Edit WIFI Configuration </span></td>

			</tr>
			<tr>
				<td  class="label" dir=LTR align=left ><span id="ssid_label"> SSID </span></td>
				<td  class="user-input" dir=LTR align=left><input type="text" name="__SL_P_P.A"></td>
			</tr>
			<tr>
				<td class="label" dir=LTR align=left style="padding-top: 15px;"> Security Type:</td>
				<td style="padding-top: 15px;">
					<input type="radio" name="__SL_P_P.B" value="0" checked="">Open
					<input type="radio" name="__SL_P_P.B" value="1">WEP
					<input type="radio" name="__SL_P_P.B" value="2">WPA1
					<input type="radio" name="__SL_P_P.B" value="3">WPA2
				</td>
			</tr>
				<td  class="label" dir=LTR align=left style="padding-top: 15px;"><span id="pass_label"> PASSKEY </span></td>
				<td class="user-input" dir=LTR align=left style="padding-top: 15px;"><input type="text" name="__SL_P_P.C"></td>
			</tr>
			<tr>
				<input type="hidden" name="__SL_P_P.D" value="7">
				<td class = "empty-line-in-box" colspan=1></td>
				<td class="user-input" dir=LTR align=left style="padding-top: 15px;"><input type="submit" value="Apply" onclick="Apply()"></input></td>
			</tr>
						
			<tr>
				<td class="user-input" dir=LTR align=left colspan=2 style="padding-top: 40px;"><input type="button" value="Exit and Restart Device" onclick="Disconnect()"></input></td>
			</tr>

			<tr >
				<td class = "border-line-top" colspan=2 >
				</td>
			</tr>
		</table>
	</form>
</body>

</html>

